// Generated by CoffeeScript 1.4.0
(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);i.prototype=n.prototype;e.prototype=new i;e.__super__=n.prototype;return e};window.AssetItemView='<li>\n	<img src="<%= asset.full_path %>" width="200" height="200"/>\n	<a href="#" class="destroyed">x</a>\n</li>';window.AssetItem=function(t){function r(){this.remove=e(this.remove,this);this.render=e(this.render,this);r.__super__.constructor.apply(this,arguments);this.item.bind("update",this.render);this.item.bind("refresh",this.render);this.item.bind("destroy",this.release)}n(r,t);r.prototype.events={"click .destroyed":"remove"};r.prototype.template=function(e){return _.template(window.AssetItemView,{asset:e})};r.prototype.render=function(){this.replace(this.template(this.item));return this};r.prototype.remove=function(e){e.preventDefault();return this.item.destroy()};return r}(Spine.Controller);window.Asset=function(e){function t(){t.__super__.constructor.apply(this,arguments)}n(t,e);t.configure("Asset","path","full_path");t.extend(Spine.Model.Ajax);t.url="http://uploader.dev/assets";return t}(Spine.Model);window.Assets=function(t){function r(){this.add_all_assets=e(this.add_all_assets,this);this.add_single_asset=e(this.add_single_asset,this);r.__super__.constructor.apply(this,arguments);Asset.bind("create",this.add_single_asset);Asset.bind("refresh",this.add_all_assets);Asset.bind("update",this.add_all_assets);this.add_all_assets()}n(r,t);r.prototype.elements={"#asset_list":"asset_list"};r.prototype.add_single_asset=function(e){var t;t=new AssetItem({item:e});return this.asset_list.append(t.render().el)};r.prototype.add_all_assets=function(){this.asset_list.html("");return Asset.each(this.add_single_asset)};return r}(Spine.Controller)}).call(this);